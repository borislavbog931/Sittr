{% extends "common/base.html" %}
{% load static %}

{% block title %}Home | Sittr{% endblock %}

{% block extra_head %}
  <link rel="stylesheet" href="{% static 'css/home.css' %}">
{% endblock %}

{% block page_header %}{% endblock %}

{% block content_container_class %}w-full px-0{% endblock %}

{% block content %}
<div class="home-landing">
  <div class="max-w-7xl mx-auto px-2 sm:px-4 lg:px-6">

  <!-- HERO -->
  <div class="max-w-6xl mx-auto">
    <section class="relative overflow-hidden rounded-3xl border border-slate-200 bg-white shadow-sm">
      <div class="grid grid-cols-1 md:grid-cols-2">

      <!-- LEFT -->
      <div class="relative z-10 p-6 sm:p-10">
        <div class="max-w-xl">

          <h1 class="text-4xl sm:text-5xl font-semibold tracking-tight text-slate-900 leading-tight">
            Find Trusted Caretakers<br class="hidden sm:block">
            for Your Pets
          </h1>

          <p class="mt-4 text-base sm:text-lg text-slate-600">
            Easily browse and book trusted local caretakers for your pet. Compare ratings, read reviews, and send hire requests in minutes.
          </p>

          <!-- PILL SEARCH (overlaps into image column) -->
          <form method="get" action="{% url 'caretaker_list' %}" class="mt-6">
            <div class="relative md:-mr-28 lg:-mr-40">
              <div class="pill">

                <!-- City -->
                <div class="flex items-center gap-2 px-4">
                  <i class="bi bi-geo-alt text-slate-400"></i>
                  <input
                    type="text"
                    name="city"
                    value="{{ request.GET.city }}"
                    placeholder="Enter your city"
                    aria-label="City"
                    class="w-40 sm:w-44 bg-transparent p-0 text-sm text-slate-900 placeholder:text-slate-400 focus:outline-none"
                  />
                </div>

                <div class="hidden sm:block w-px bg-slate-200"></div>

                <!-- Pet type -->
                <div class="flex items-center gap-2 px-4">
                  <i class="bi bi-heart text-slate-400"></i>
                  <select
                    name="pet_type"
                    aria-label="Pet type"
                    class="w-40 sm:w-44 bg-transparent p-0 text-sm text-slate-900 focus:outline-none"
                  >
                    <option value="">Pet type..</option>
                    {% for p in pet_types %}
                      <option value="{{ p.id }}" {% if request.GET.pet_type == p.id|stringformat:"s" %}selected{% endif %}>
                        {{ p.name }}
                      </option>
                    {% endfor %}
                  </select>
                </div>

                <div class="hidden md:block w-px bg-slate-200"></div>

                <!-- Button -->
                <button
                  type="submit"
                  class="bg-teal-600 text-white text-sm font-semibold hover:bg-teal-700"
                >
                  <span class="inline-flex items-center justify-center gap-2">
                    <i class="bi bi-search"></i>
                    Search
                  </span>
                </button>

              </div>
            </div>

            <div class="mt-3 flex items-center gap-2 text-sm text-slate-500">
              <i class="bi bi-lightning-charge text-amber-500"></i>
              No account needed, fast &amp; easy
            </div>
          </form>

        </div>
      </div>

      <!-- RIGHT IMAGE -->
      <div class="hero-media hidden md:block">
        <img
          src="{% static 'images/background.png' %}"
          alt=""
          class="saturate-125 contrast-110"
        />
        <!-- Blend -->
        <div class="absolute inset-0 bg-gradient-to-r from-white via-white/30 to-transparent" aria-hidden="true"></div>
      </div>

      </div>
    </section>
  </div>

  <!-- 3 FEATURE CARDS (“bubbles”) -->
  <div class="max-w-6xl mx-auto">
    <section class="mt-8 mb-20 grid gap-4 md:grid-cols-3">

    <div class="rounded-3xl border border-slate-200 bg-white p-6 shadow-sm">
      <div class="flex items-start gap-4">
        <div class="flex h-12 w-12 items-center justify-center rounded-2xl bg-teal-50 text-teal-600">
          <i class="bi bi-shield-check text-xl"></i>
        </div>
        <div>
          <div class="text-sm font-semibold text-slate-900">Vetted Caretakers</div>
          <div class="mt-1 text-sm text-slate-600">
            All caretakers are thoroughly vetted and reviewed.
          </div>
        </div>
      </div>
    </div>

    <div class="rounded-3xl border border-slate-200 bg-white p-6 shadow-sm">
      <div class="flex items-start gap-4">
        <div class="flex h-12 w-12 items-center justify-center rounded-2xl bg-cyan-50 text-cyan-600">
          <i class="bi bi-bar-chart-line text-xl"></i>
        </div>
        <div>
          <div class="text-sm font-semibold text-slate-900">Compare &amp; Choose</div>
          <div class="mt-1 text-sm text-slate-600">
            Compare ratings, read reviews, and select the best fit.
          </div>
        </div>
      </div>
    </div>

    <div class="rounded-3xl border border-slate-200 bg-white p-6 shadow-sm">
      <div class="flex items-start gap-4">
        <div class="flex h-12 w-12 items-center justify-center rounded-2xl bg-amber-50 text-amber-600">
          <i class="bi bi-lightning-charge text-xl"></i>
        </div>
        <div>
          <div class="text-sm font-semibold text-slate-900">Quick &amp; Easy Requests</div>
          <div class="mt-1 text-sm text-slate-600">
            Send hire requests in just a few clicks.
          </div>
        </div>
      </div>
    </div>

  </section>



  <!-- FEATURED CARETAKERS -->
  <section class="mt-8">
    <div class="text-center">
      <h2 class="text-2xl sm:text-3xl font-semibold text-slate-900">
        Meet Some of Our Trusted Caretakers
      </h2>
      <h2>
        <span class="mt-2 inline-block text-sm text-slate-600">

        </span>
      </h2>
    </div>

    {% if featured_caretakers %}
      <div class="mt-12 grid gap-6 md:grid-cols-3">
        {% for caretaker in featured_caretakers %}
          <div class="overflow-hidden rounded-3xl border border-slate-200 bg-white shadow-sm">

            <!-- Smaller top image -->
            <a href="{% url 'caretaker_detail' caretaker.slug %}" class="block text-decoration-none">
              {% if caretaker.profile_pic %}
                <img
                  src="{{ caretaker.profile_pic.url }}"
                  alt="{{ caretaker.name }}"
                  class="h-24 w-full object-cover"
                  loading="lazy"
                />
              {% else %}
                <div class="h-24 w-full bg-slate-100 flex items-center justify-center text-slate-400">
                  <i class="bi bi-person text-3xl"></i>
                </div>
              {% endif %}
            </a>

            <div class="p-6">
              <div class="text-lg font-semibold text-slate-900">{{ caretaker.name }}</div>

              <div class="mt-2 flex items-center gap-2 text-sm text-slate-500">
                <i class="bi bi-geo-alt"></i>
                <span>{{ caretaker.city }}</span>
              </div>

              <div class="mt-3 flex items-center gap-2 text-sm text-slate-600">
                <i class="bi bi-star-fill text-amber-400"></i>
                {% if caretaker.avg_rating %}
                  <span class="font-semibold text-slate-900">{{ caretaker.avg_rating|floatformat:1 }}</span>
                  <span>/10</span>
                {% else %}
                  <span>No reviews</span>
                {% endif %}
              </div>

              <p class="mt-3 text-sm text-slate-600 min-h-[44px]">
                {{ caretaker.bio|default:"Friendly and reliable sitter ready to help!"|truncatechars:85 }}
              </p>

              <a
                href="{% url 'caretaker_detail' caretaker.slug %}"
                class="mt-5 inline-flex w-full items-center justify-center rounded-2xl bg-teal-600 px-4 py-3 text-sm font-semibold text-white hover:bg-teal-700 text-decoration-none"
              >
                View Profile
              </a>
            </div>
          </div>
        {% endfor %}
      </div>

      <div class="mt-8 text-center">
        <a
          href="{% url 'caretaker_list' %}"
          class="inline-flex items-center justify-center rounded-full border border-slate-200 bg-white px-6 py-2 text-sm font-semibold text-slate-700 hover:border-teal-200 hover:text-teal-700 text-decoration-none"
        >
          Browse all caretakers
        </a>
      </div>
    {% else %}
      <div class="mt-8 rounded-2xl border border-dashed border-slate-200 bg-slate-50 p-6 text-sm text-slate-600 text-center">
        No caretakers yet.
      </div>
    {% endif %}
    </section>
  </div>

  </div>
</div>
{% endblock %}
