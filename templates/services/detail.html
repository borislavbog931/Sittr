{% extends "common/base.html" %}

{% block title %}{{ service.name }} | Sittr{% endblock %}

{% block page_header %}
  <div class="mb-6">
    <h1 class="text-2xl font-semibold text-slate-900">{{ service.name }}</h1>
    <div class="text-sm text-slate-500">Service details</div>
  </div>
{% endblock %}

{% block content %}
  <section class="rounded-3xl border border-slate-200 bg-white p-6 sm:p-8 shadow-sm">
    <p class="text-sm text-slate-600">
      {% if service.description %}
        {{ service.description }}
      {% else %}
        No description provided.
      {% endif %}
    </p>

    <div class="mt-6 flex flex-wrap gap-2">
      <a class="inline-flex items-center gap-2 rounded-xl bg-teal-600 px-4 py-2 text-sm font-semibold text-white hover:bg-teal-700"
         href="{% url 'service_edit' service.pk %}">
        <i class="bi bi-pencil-square"></i> Edit
      </a>
      <a class="inline-flex items-center gap-2 rounded-xl border border-rose-200 bg-rose-50 px-4 py-2 text-sm font-semibold text-rose-700 hover:bg-rose-100"
         href="{% url 'service_delete' service.pk %}">
        <i class="bi bi-trash"></i> Delete
      </a>
      <a class="inline-flex items-center gap-2 rounded-xl border border-slate-200 bg-white px-4 py-2 text-sm font-semibold text-slate-700 hover:border-teal-200 hover:text-teal-700"
         href="{% url 'service_list' %}">
        Back to services
      </a>
    </div>
  </section>
<hr class="my-4">

<div class="d-flex align-items-center justify-content-between flex-wrap gap-2 mb-3">
  <h2 class="h5 m-0">Caretakers offering this service</h2>
  <span class="text-muted small">{{ caretakers|length }} found</span>
</div>

{% if caretakers %}
  <div class="list-group">
    {% for caretaker in caretakers %}
      <a class="list-group-item list-group-item-action d-flex align-items-center justify-content-between"
         href="{% url 'caretaker_detail' caretaker.slug %}">
        <div class="d-flex align-items-center gap-3">
          {# Optional avatar if you have caretaker.profile_pic #}
          {% if caretaker.profile_pic %}
            <img src="{{ caretaker.profile_pic.url }}"
                 alt="{{ caretaker.name }}"
                 class="rounded-circle border"
                 style="width:44px;height:44px;object-fit:cover;">
          {% else %}
            <div class="rounded-circle bg-light border"
                 style="width:44px;height:44px;display:grid;place-items:center;">
              <i class="bi bi-person"></i>
            </div>
          {% endif %}

          <div>
            <div class="fw-semibold">{{ caretaker.name }}</div>
            <div class="text-muted small">
              {{ caretaker.city }} · €{{ caretaker.price_per_hour }}/hr
            </div>
          </div>
        </div>

        <i class="bi bi-chevron-right text-muted"></i>
      </a>
    {% endfor %}
  </div>
{% else %}
  <div class="alert alert-light border">
    No caretakers currently offer this service.
  </div>
{% endif %}
    
{% endblock %}
